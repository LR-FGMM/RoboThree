var LRCommander = function ( robotId, server, commandTemplate ) {
    this.robotId = robotId;
    this.server = server;
    this.degToRad = function ( v ) { return 180 * v / Math.PI };
    this.radToDeg = function ( v ) { return v * Math.PI / 180 };
    this.commandTemplate = commandTemplate || "wget {server}/exec --post-data '{data}' 2> /dev/null -O -";
    this.cp = require('child_process');
    this.dataOut = {};
    
    var commander = this;
    this.functions = {
        moveJoint: function ( angle ) {
            commander.dataOut = {
                command: 'moveJoint',
                parameters: { angle: angle }
            };
            commander.exec();
        }
    };
    this.exec = function() {
        commander.dataOut.robotId = commander.robotId;
        var sentData = JSON.stringify ( commander.dataOut );
        var receivedData;
        console.log ( "Executing: " + sentData + '...' );
        var command = commander.commandTemplate.replace('{server}', commander.server).replace('{data}', sentData);
        return this.cp.execSync( command ).toString();
    }
}

module.exports = LRCommander;
